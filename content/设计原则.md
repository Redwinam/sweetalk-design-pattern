# 设计原则

本部分介绍设计原则，书中一共提到四个原则：

- 单一职责原则（Single Responsibility Principle，SRP）：修改一个类的原因只有一个。
- 开闭原则（Open-Closed Principle，OCP）：对于扩展类应该开放，对于修改类应该封闭。
- 迪米特法则（Law of Demeter，LoD）：也叫最少知识原则，类应尽量降低成员的访问权限，即耦合尽可能弱。
- 依赖倒置原则（Dependency Inversion Principle，DIP）：高层次的类不应依赖低层次的类，都应依赖于抽象接口。

此外，还有下面常见的设计原则：

- 里氏替换原则（Liskov Substituion Principle，LSP）：扩展一个类时，能够（不修改代码）将子类的对象作为父类对象进行传递。和依赖倒置原则意思接近。
- 接口隔离原则（Interface Segregation Principle，ISP）：尽量缩小接口范围，让客户端不必实现不用的方法。和迪米特法则接近。
- 合成/聚合复用原则（Composite/Aggragate Reuse Principle，CARP）：尽量通过合成/聚合而不是继承达到复用目的。

## 开闭原则

开闭原则，The Open-Closed Principle，简称 OCP，是指软件实体（类、模块、函数等）应该可以扩展，但是不可以修改。即对于扩展是开放的，对于更改是封闭的。通俗来说就是对于要增加的新功能或要调整的改动，尽量扩展新代码而不是修改已有代码。

**如何使用**

通过对以下可能时机的变化，创建抽象，隔离以后发生的同类变化。

- 在开发工作展开前预测可能的变化

- 或展开不久后知道可能发生的变化

- 或当实际需要发生时带来的变化

**使用原则**

- 仅对程序中呈现出频繁变化的部分做出抽象。
- 不要刻意对每个部分进行抽象，拒绝不成熟的抽象，它和抽象本身一样重要。

以一个加法器为例。

当我们在接到这个需求时，就可以很容易地想到以后可能需要减法、乘法、除法等等运算。所以，我们在开发的时候就可以先把「加法」抽象成一个类，这样，以后需要其他运算时，只要增加一个类即可。

实际做的时候我们可能会发现用户输入的可能是个表达式，不一定是两个数字，有可能是三个数字，还有可能有括号。这时候我们可能会写一个四则混合运算解析器类。以后如果需要解析其他表达式（如复数），则只需增加对应的类。

好不容易做完了，突然又来了新需求，需要做一个字符串的加法（即拼接），我们假设 API 不变。此时，我们可能需要设计一个输入表达式判断器类，用于判断是数字还是字符串的运算。我们还需要对原来的代码进行一些调整，以便 API 进来的输入能够首先通过判断器。







## 参考

- [设计模式概念和七大原则 - 腾讯云开发者社区 - 腾讯云](https://cloud.tencent.com/developer/article/1650116)
